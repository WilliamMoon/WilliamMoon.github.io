---
title: 快速建站
date: 2025-11-12T12:32:04+08:00
lastmod: 2025-11-12T12:32:04+08:00
# cover: /img/cover.jpg
# covercaption: a description of the cover image
# images:
#   - /img/cover.jpg
categories:
  - 技术日志
tags:
  - 静态网站
# nolastmod: true
# math: true
---

这篇文章介绍了我如何搭建一个静态博客网站。
<!--more-->
不过站点仅有展示文章的基本功能，更多功能比如评论系统、搜索功能，等后续做了再考虑完善相关内容。随着基础设施的发展，对我这样只是发发文章的人来说，未来不见得有独立建站的必要性，现在就是折腾着玩。

## 为什么自建站

“**不怎么麻烦就能获得的自由**”这点就足够让我向自建博客的方向前进，前人撰写的完善的部署文档让我的前进没有阻碍。

从另一个角度来说，我简单看了下CSDN、cnblogs、ITeye、51CTO、掘金这几个平台，为什么不选择博客平台大概是这么三点原因：
1. 平台出于稳定考虑通常**不会给用户多少操作空间**，而我的探索欲还是挺强的，即使只是博客，我也希望借之尝试各种各样的技术；
2. 平台**追求商业价值**的手段会影响我纯粹专注地构建博客。
3. 博客**平台氛围**和我设想中这个博客的气质不太搭

**平台最大的好处是自带流量**，便于在技术圈建立影响力，但我暂时没有需求。我是为自己而写，比起技术博客，我的博客定位更像是公开日记，写点技术是因为我脑子里刚好在想技术，而不是准备靠这篇文章教别人技术。

## 为什么选静态网站
静态网站具有以下优点：
1. **速度快**：静态网站不需要服务器端处理请求，直接从CDN或服务器传输静态文件，加载速度更快。
2. **安全性高**：由于没有服务器端代码，静态网站更不容易受到攻击。
3. **易于部署**：静态网站可以托管在各种平台上，如GitHub Pages、Netlify等，部署过程简单。

综上AI所述，静态网站是我这样的懒狗建站的第一选择。

## 选择静态网站生成器
首先需要选择一个静态网站生成器，常见的有Hugo、Jekyll、Hexo等。三者我都尝试了下，Jekyll采用Ruby编写，是GitHub Pages官方支持的生成器，自带workflow，相当适合初学者使用，缺点是要装Ruby而且网站构建速度较慢。Hexo基于Node.js，适合有前端基础、喜欢定制化的用户，生成速度较快，缺点也是要装环境。Hugo采用编译型的Go语言编写，生成速度极快，能做到修改后毫秒级重生成，适合我这种会在本地各种折腾的人。

考虑到没有环境依赖，我直接选择了Hugo，电脑上少装一个环境是一个，而且Node.js和Ruby环境在Windows上都有点臃肿而难以管理。不过总结网友评论，最后要完全满足自己需求都要搞最重型的WordPress，二十多年的插件生态、60.5%的CMS市场占有率（我现查的[W3Techs](https://w3techs.com/technologies/details/cm-wordpress)今天最新数据）确实不是吹的。

## 安装Hugo
版本上我直接安装Hugo Extended，因为相比Standard版基本没有额外成本。有这个优点，具体的好处比如支持Sass从而支持更多主题、支持WebP图像处理都不用细看了。

我同时在使用多台电脑，Windows 10/11和macOS系统都有，并且每个系统都安装了包管理器，在每个系统下安装Hugo都非常简单，一个命令搞定。其他系统和其他安装方式参见[官方文档](https://gohugo.io/installation/)。

Windows 11直接使用自带的WinGet包管理器：
```powershell
winget install Hugo.Hugo.Extended
```

> 坦白说大部分时候WinGet比起说是包管理器，不如说是个能自己找到软件下载链接的下载器，不过用它总比用搜索引擎下安装包或者手动从源码构建省事。

Windows 10 1809之前的系统可以使用Chocolatey或者Scoop包管理器：
```powershell
choco install hugo-extended
# 或者
scoop install hugo-extended
```

> Scoop其实比WinGet干净得多，毕竟它不会调用管理员权限在系统里到处拉，只会使用用户权限把软件放在自己的目录下，但是我是有什么用什么的人，所以WinGet也无妨。

macOS当然就是用Homebrew：
```sh
brew install hugo
```

新开一个shell，执行如下命令确认安装成功。
```sh
hugo version
```

## 初始化站点
在站点目录（本文以`hugo-blog`为例）上级目录执行以下命令初始化站点并添加主题
```sh
hugo new site hugo-blog
cd hugo-blog
git init
# 添加主题作为子模块，例如官方教程里的Ananke主题
git submodule add https://github.com/theNewDynamic/gohugo-theme-ananke.git themes/ananke
# 添加主题到站点配置
echo "theme = 'ananke'" >> hugo.toml
```
然后就可以打开输出里的URL预览网站了。

> `git submodule`比有些主题的文档让在themes目录下`git clone`更好，因为前者能让主题和站点的版本独立管理。

## 撰写新文章
标准流程是在博客根目录下执行
```sh
hugo new posts/xxx.md
```
创建新文章，编辑博客文件夹下的`content/posts/xxx.md`文件来撰写文章。

文章开头的元信息（frontmatter，查了下没看到统一的翻译方法）部分里可能出现各种乱七八糟的属性，最重要的就是`title`、`date`和`draft`，其他属性不认识都可以删，如果想认识一下可以在主题文档里搜`frontmatter`。

写完想发布时，官方是说把`draft`属性改为`false`（当然[文档](https://gohugo.io/getting-started/usage/#draft-future-and-expired-content)里还有`date`到了、`expiryDate`没到的要求，不过正常不会出现），但我直接删了这个属性也可以，大概率不会出问题，出问题再说，反正这个网站我还要大改。

## 本地预览
执行
```sh
hugo server -D
```
启动本地预览服务器，`-D`参数表示包含草稿文章，浏览器访问显示的URL即可预览网站。

## 部署
采用GitHub Pages部署，简单来说本地修改站点和工作流两个配置，GitHub里采用该工作流即可，详见[官方文档](https://gohugo.io/host-and-deploy/host-on-github-pages/)。

站点配置就是增加下图像缓存目录
```toml
[caches]
  [caches.images]
    dir = ':cacheDir/images'
```

然后创建GitHub Actions工作流配置：
```sh
mkdir -p .github/workflows
touch .github/workflows/hugo.yaml
```
配置内容详见[官方文档](https://gohugo.io/host-and-deploy/host-on-github-pages/#step-4)，粘贴进`hugo.yaml`。工作流里绝大部分动作都是构建环境，没什么好说的，唯一需要注意的是如果本地没有使用最新的Hugo版本，`HUGO_VERSION`字段要和本地安装的Hugo版本一致，否则可能会出现一些奇怪的问题。

最后将博客文件夹push到GitHub仓库，然后在仓库的`Settings > Pages > Build and deployment > Source`里选择用`GitHub Actions`，选择完就会立即生效。

等待工作流跑完，就可以用GitHub Pages的URL访问博客了。

## 更多站点配置
站点配置非常丰富且因客观主题和主观需求而异，详见[官方文档](https://gohugo.io/configuration/)。由于已经写累了，这里就写一个Raw HTML警告的处理配置。

如果文章中有HTML代码，比如用`<br>`在表格里换行、`<img width="50">`来插入调整尺寸的图片、`<p align="right">`来给引言作者右对齐，在生成网站时会报警告信息，看到就感觉不舒服。考虑到自己写的文章里只会使用非常简单、基本安全的HTML标记，可以在站点配置文件中添加以下内容来允许渲染器（Hugo默认用的Goldmark）渲染文章里的HTML代码：
```toml
[markup.goldmark.renderer]
  unsafe = true
```
如果还是希望保留这个安全考虑，只是不想在生成网站时看见警告，可以只添加下面这一行来不显示相关警告：
```toml
ignoreLogs = ['warning-goldmark-raw-html']
```

当然最好还是不直接用HTML，相关问题的解决方案等以后遇到再探索吧，这次遇到是测试文章里在试HTML。

## 写作背后的思考
在撰写这篇文章时，我始终被一种割裂感困扰。

一方面，我希望它逻辑自洽，能让一位毫无基础的朋友也能依样画葫芦地搭建起一个静态博客网站。
但另一方面，我又觉得写这些步骤实在太过机械化，只是把官方文档的话再说一遍，遇到问题也不过是把通过非常简单的关键词就能在文档或者网络上搜索到的解决方案再罗列一遍，何况现在是能用大模型模糊提问的时代，简单问题的解决方案唾手可得。

最终，我选择在不省略环节的同时，逐渐省略了每个环节里我觉得直接点开链接就能搞定的细节，由读者自己参考已经足够完善的文档去填补。我希望对这篇文章的读者而言，锻炼独立解决问题的能力远比机械地照着步骤搭建完网站更重要。

不过，如果你在跟随本文操作遇到障碍，也非常欢迎将你尝试解决问题的探索过程和结果与我分享，我也会尽快完善联系方式。
